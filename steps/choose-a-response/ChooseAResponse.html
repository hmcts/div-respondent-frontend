{% extends "question.njk" %}

{% from "look-and-feel/components/fields.njk" import formSection, selectionButtons, selectionButton %}

{% set title %}
    {{ content.title | safe }}
{% endset %}

{% set isBehaviour = session.originalPetition.reasonForDivorce == "unreasonable-behaviour" %}

{% if isBehaviour %}
    {% set responseOptions = [
        { label: content.fields.proceed.heading, value: "yes", description: content.fields.proceed.summary },
        { label: content.fields.disagree.heading, value: "no", description: content.fields.disagree.summary }
    ] %}
{% else %}
    {% set responseOptions = [
        { label: content.fields.proceed.heading, value: "yes", description: content.fields.proceed.summary },
        { label: content.fields.proceedButDisagree.heading, value: "proceedButDisagree", description: content.fields.proceedButDisagree.summary },
        { label: content.fields.disagree.heading, value: "no", description: content.fields.disagree.summary }
    ] %}
{% endif %}

{% block fields %}

    <div id="choose-a-response">

        <p>{{ content.action | safe }}</p>

        <details>
            <summary>
                <span class="summary">{{ content.info.heading | safe }}</span>
            </summary>
            <div class="panel panel-border-narrow">
                <h2 class="heading-small">{{ content.info.options.proceed.heading | safe }}</h2>
                <p class="text">{{ content.info.options.proceed.summary | safe }}</p>

                {% if isBehaviour %}
                    <h2 class="heading-small">{{ content.info.options.proceedButDisagree.heading | safe }}</h2>
                    <p class="text">{{ content.info.options.proceedButDisagree.summary | safe }}</p>
                {% endif %}

                <h2 class="heading-small">{{ content.info.options.disagree.heading | safe }}</h2>
                <p class="text">{{ content.info.options.disagree.summary | safe }}</p>
            </div>
        </details>

        {% call formSection() %}
            {{ selectionButtons(fields.respDefendsDivorce, content.title,
                options = responseOptions,
                hint=false,
                hideQuestion=true,
                inline=false,
                type='radio'
            ) }}
        {% endcall %}
    </div>

{% endblock %}
